// Generated by CoffeeScript 1.3.3
(function() {
  var FiddleController, _ref;

  this.app = (_ref = window.app) != null ? _ref : {};

  FiddleController = (function() {

    function FiddleController() {
      this.setup();
    }

    FiddleController.prototype.setup = function() {
      this.focusAndSelect("#xpath");
      ($("#toggle")).on("click", function(e) {
        e.preventDefault();
        return app.controller.toggleFold();
      });
      window.key.filter = this.filter;
      return this.assignKeys();
    };

    FiddleController.prototype.toggleFold = function() {
      var $fold;
      $fold = $("#xml-document");
      $fold.toggleClass("out");
      if ($fold.hasClass("out")) {
        return this.focusAndSelect("#xdoc");
      }
    };

    FiddleController.prototype.focusAndSelect = function(field) {
      var $field;
      $field = $(field);
      return window.setTimeout(function() {
        return $field[0].select();
      }, 300);
    };

    FiddleController.prototype.assignKeys = function() {
      return key('[', function() {
        return console.log('[]');
      });
    };

    FiddleController.prototype.filter = function(event) {
      var tagName;
      tagName = (event.target || event.srcElement).tagName;
      console.log(!(tagName === 'SELECT' || tagName === 'TEXTAREA'));
      return !(tagName === 'SELECT' || tagName === 'TEXTAREA');
    };

    return FiddleController;

  })();

  $(function() {
    return app.controller = new FiddleController;
  });

}).call(this);
